<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="description" content="" />
  <meta name="author" content="" />

  <title>Sunbird Translate</title>

  <link rel="icon" type="image/x-icon" href="images/favicon.png" />

  <!-- core CSS -->

  <!--link href="css/styles.css" rel="stylesheet" /-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet'>
  <link href='https://fonts.googleapis.com/css?family=Roboto Slab' rel='stylesheet'>


  <style>
    #logo-image {
      max-height: 40px;
    }

    .heading {
      font-family: 'Roboto', sans-serif;
      font-weight: 500;
      font-size: 30px;
      color: rgb(255, 255, 255);
    }

    .subheading {
      color: #dc7828;
      font-family: "Roboto Slab", Roboto;
      font-size: 20px;
      font-weight: 200;
      line-height: 34px;
    }

    p {
      font-family: 'Roboto', sans-serif;
    }

    h1 {
      font-family: 'Roboto', sans-serif;
    }

    h2 {
      font-family: 'Roboto', sans-serif;
    }

    body {
      font-family: 'Roboto', sans-serif;
    }

    label {
      font-family: 'Roboto', sans-serif;
    }

    .translation-text {
      font-size: 30px;
    }

    textarea {
      font-size: 30px;
    }

    .nav-link {
      color: #505f6e;
    }

    .nav-pills .nav-link.active {
      background-color: #282850;
    }

    .btn-primary {
      background-color: #282850;
      border-color: #282850;
      color: #fff;
    }

    .feedback-label {
      font-size: 0.9em;
      color: rgb(108, 117, 125);
    }
  </style>

</head>

<body class="d-flex flex-column h-100">
  <main class="flex-shrink-0">

    <!-- Header-->
    <section id="hero" class="hero" style="background-color: #282850;">
      <header class="header px-1 py-1" style="background-image: url('images/backgroundImage.png'); background-repeat: no-repeat; background-attachment: fixed;
      background-position: 0px -400px; background-size: 100% 100%;">
        <div class="row justify-content-start mt-2 mb-2 gx-0">
          <div class="col-md-3 col-sm-12 mx-1 my-2">
            <a href="https://sunbird.ai" class="logo">
              <img src="images/logo.png" alt="Sunbird AI" id="logo-image">
            </a>
          </div>
          <div class="col-md-6 col-sm-12 text-center align-items-center" style="margin-top: 11px">
            <h1 class="heading">Sunbird Translation</h1>
            <h2 class="subheading">Translate Ugandan languages</h2>
          </div>
        </div>
      </header>
    </section>

    <section>
      <div class="container-xl px-5 mt-5 py-1">
        <div class="row">
          <div class="col-md-6">
            <div class="language-select-area">
              <div class="form-floating">
                <select id="languageFrom" class="form-select" aria-label="Language translated from" onChange="updateTargetLanguages()">
                  <option value="en" selected>English</option>
                  <option value="mul">Acholi, Ateso, Luganda, Lugbara or Runyankore</option>
                </select>
                <label for="languageFrom">From</label>
              </div>
              <div class="form-floating">
                <textarea class="form-control translation-text" id="sourceData" style="height: 200px;"></textarea>
                <label for="sourceData">Enter text</label>
              </div>
            </div>
            <div class="d-flex justify-content-between my-3">
              <button type="button" class="btn btn-primary btn-lg" onclick="sendData()">
                Translate
              </button>
              <div class="spinner-border" id="translation-in-progress-spinner" style="display: none" role="status">
              </div>
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-floating">
              <select id="languageTo" class="form-select" aria-label="Language to translate to" onChange="sendData()">
                <option value="ach">Acholi</option>
                <option value="teo">Ateso</option>
                <option value="lug" selected>Luganda</option>
                <option value="lgg">Lugbara</option>
                <option value="nyn">Runyankore</option>
              </select>
              <label for="languageTo">To</label>
            </div>
            <div class="form-floating">
              <textarea id="translatedData" class="form-control translation-text" style="height: 200px; background-color: #f8f9fa;"></textarea>
              <label for="translatedData">Translation</label>
            </div>

            <div class="feedback-label mt-3">
              Please help us to improve the system with your feedback:
            </div>
            <div class="btn-group my-3 mt-2">
              <button class="btn btn-outline-secondary btn-sm"><i class="bi bi-hand-thumbs-up"></i> &nbsp;Good translation</button>
              <button class="btn btn-outline-secondary btn-sm"><i class="bi bi-hand-thumbs-down"></i>&nbsp;Bad translation</button>
            </div>
          </div>
        </div>

        <div class="row">
          <div>
            <button class="btn btn-outline-secondary btn mt-2" type="button" data-bs-toggle="collapse" data-bs-target=".collapsible-section" aria-expanded="false" aria-controls="faq about">
              Find out more...
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ section-->
    <section id="faq" class="faq collapse collapsible-section mt-4">
      <div class="container">
        <header class="section-header">
          <h5 class="fw-bolder px-3" style="color: #282850;">Frequently asked questions</h5>
        </header>
        <div class="row">
          <div class="col-lg-6">
            <div class="accordion accordion-flush" id="faqlist1">
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq-content-1">
                    When is my language coming to this platfrom?
                  </button>
                </h2>
                <div id="faq-content-1" class="accordion-collapse collapse" data-bs-parent="#faqlist1">
                  <div class="accordion-body">
                    Please let us know your feedback on which other languages would be useful.
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq-content-2">
                    Why have you provided this service?
                  </button>
                </h2>
                <div id="faq-content-2" class="accordion-collapse collapse" data-bs-parent="#faqlist1">
                  <div class="accordion-body">
                    Sunbird AI is a non-profit based in Uganda, working on practical, open-source, artificial intelligence systems for social benefit. We believe that the ability to translate between local languages is important for many practical
                    uses.
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-6">
            <div class="accordion accordion-flush" id="faqlist2">
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2-content-1">
                    How can I contribute?
                  </button>
                </h2>
                <div id="faq2-content-1" class="accordion-collapse collapse" data-bs-parent="#faqlist2">
                  <div class="accordion-body">
                    TODO
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2-content-1">
                    How can I contact the team with questions or feedback?
                  </button>
                </h2>
                <div id="faq2-content-1" class="accordion-collapse collapse" data-bs-parent="#faqlist2">
                  <div class="accordion-body">
                    Please email us at <a href="mailto:info@sunbird.ai">info@sunbird.ai</a>.
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- About section-->
    <section id="about" class="pt-5 collapse collapsible-section">
      <div class="container px-5 my-5 pb-md-4">
        <div class="row gx-5 align-items-center">
          <div class="col-lg-6"><img class="img-fluid rounded mb-5 mb-lg-0" src="images/ug-lang-map-768x608.png" alt="..." />
          </div>
          <div class="col-lg-6">
            <h2 class="fw-bolder" style="color: #282850;">African language technology </h2>
            <p class="lead fw-normal text-muted mb-0">Africa is a very linguistically diverse continent, with at
              least 1500 languages (compared to around 200 in Europe), for most of which no AI language
              technology has ever been developed. Almost all current effort on AI language technology is
              focused on English and a handful of other languages. To contribute to language resources in
              Africa we set out to collect parallel text sentences for the 5 top languages in Uganda
              sufficient to enable a start on the machine translation task for Ugandan languages...</p>
            <a href="https://sunbird.ai/2021/06/11/parallel-text-language-corpus-dataset-for-key-ugandan-languages/" class="btn btn-primary btn-md mt-3">Read more</a>
          </div>
        </div>
      </div>
      <div class="container px-5 pt-5">
        <div class="row gx-5">
          <div class="col-lg-4 mb-5 mb-lg-0">
            <h2 class="fw-bolder mb-0" style="color: #282850;">Languages our
              system can translate.
            </h2>
          </div>
          <div class="col-lg-8">
            <div class="row gx-5 row-cols-1 row-cols-md-2">
              <div class="col mb-5 h-100">
                <h2 class="fw-bold h5" style="color: #282850;">Luganda</h2>
                <p class="mb-0">The Ganda language or Luganda is a Bantu language spoken in the African
                  Great Lakes region.
                </p>
              </div>
              <div class="col mb-5 h-100">
                <h2 class="fw-bold h5" style="color: #282850;">English</h2>
                <p class="mb-0">English is widely considered to be the lingua franca of the world and is the
                  standard language in a wide variety of fields.</p>
              </div>
              <div class="col mb-5 h-100">
                <h2 class="fw-bold h5" style="color: #282850;">Lugbara</h2>
                <p class="mb-0">Language of the Lugbara people. It is spoken in the West Nile region in
                  northwestern Uganda.</p>
              </div>
              <div class="col mb-5 h-100">
                <h2 class="fw-bold h5" style="color: #282850;">Runyakitara</h2>
                <p class="mb-0">A standardized language based on four closely related languages of western
                  Uganda: Nyoro or Runyoro. Kiga (Chiga) or Rukiga. Nkore or Runyankole.</p>
              </div>
              <div class="col mb-5 h-100">
                <h2 class="fw-bold h5" style="color: #282850;">Acholi</h2>
                <p class="mb-0">A Southern Luo dialect spoken by the Acholi people in the districts of Gulu,
                  Kitgum and Pader in northern Uganda.</p>
              </div>
              <div class="col mb-md-0 h-100">
                <h2 class="fw-bold h5" style="color: #282850;">Ateso</h2>
                <p class="mb-0">An Eastern Nilotic language spoken by the Iteso people of Uganda and Kenya.
                  It is part of the Tesoâ€“Turkana language cluster.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

  </main>

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/purecounter/purecounter.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

  <!-- core JS-->

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  <script type="text/javascript" src="js/scripts.js"></script>

  <script type="text/javascript">
    async function sendData() {
      // Clear any translated text from the output panel.
      $('#translatedData').val('');

      //translated data
      let dataFromModel = '';

      //getting language from
      let selectLanguageFrom = document.getElementById('languageFrom');
      let selectLanguageFromText = selectLanguageFrom.options[selectLanguageFrom.selectedIndex].value;

      //getting language to
      let selectLanguageTo = document.getElementById('languageTo');
      let selectLanguageToText = selectLanguageTo.options[selectLanguageTo.selectedIndex].value;

      //getting data to translate
      let dataToTranslate = document.getElementById("sourceData").value;

      //getting the model
      let model = ""
      if ($("#languageFrom").val() == 'en') {
        model = "en-mul"
        // Add a tag specifying the target language
        dataToTranslate = `>>${selectLanguageToText}<< ${dataToTranslate}`
      } else {
        model = "mul-en"
      }

      // Don't do anything if the source text is empty or just spaces
      if (/^ *$/.test(dataToTranslate)) {
        return;
      }

      $('#translation-in-progress-spinner').show();

      let dataObj = {
        "model": model,
        "inputs": dataToTranslate
      }

      await postData(dataObj)
        .then(data => {
          console.log(data);
          dataFromModel = data[0]["generated_text"];
        })
        .catch((err) => {
          console.log('error', err);
        });

      console.log(dataFromModel);

      document.getElementById("translatedData").value = `${dataFromModel}`;

      $('#translation-in-progress-spinner').hide()
    }

    async function postData(data) {
      console.log(data);
      var myHeaders = new Headers();
      myHeaders.append("Content-Type", "application/json");
      myHeaders.append("Accept", 'application/json')
      var raw = JSON.stringify(data);
      var requestOptions = {
        method: 'POST',
        mode: 'cors',
        cache: 'no-cache',
        headers: myHeaders,
        body: raw,
        Accept: '*/*',
        redirect: 'follow'
      }
      const response = await fetch('https://8c8jirboi0.execute-api.eu-west-1.amazonaws.com/prod/', requestOptions);
      return response.json();
    }

    /* Make enter key submit the text for translation. */
    $("#sourceData").keypress(function(e) {
      if (e.which === 13) {
        e.preventDefault();
        sendData();
      }
    });

    /* Update the target language options depending on the source language. */
    var preferredNonEnglishTarget = $("#languageTo").val();
    var nonEnglishOptions = [
      ['Acholi', 'ach'],
      ['Ateso', 'teo'],
      ['Luganda', 'lug'],
      ['Lugbara', 'lgg'],
      ['Runyankole', 'nyn']
    ];

    function updateTargetLanguages() {
      targetSelect = $("#languageTo");
      if ($("#languageFrom").val() == 'en') {
        targetSelect.empty()
        for (const option of nonEnglishOptions) {
          isPreferred = (option[1] == preferredNonEnglishTarget);
          targetSelect.append(new Option(option[0], option[1], isPreferred, isPreferred));
        }
      } else {
        // Remember what the target language was before clearing the options.
        preferredNonEnglishTarget = $("#languageTo").val();
        targetSelect.empty()
        targetSelect.append(new Option('English', 'en', true, true));
      }
    }
  </script>
</body>

</html>
